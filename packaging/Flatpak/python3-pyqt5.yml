name: PyQt5
cleanup:
    - /include
    - /lib/python3.12/site-packages/*.pyi
    - /lib/python3.12/site-packages/PyQt5/uic
config-opts:
    - --enable-x11
    - --disable-static
buildsystem: simple
build-commands:
    - sip-install
      --target-dir ${FLATPAK_DEST}/lib/python3.12/site-packages
      --scripts-dir ${FLATPAK_DEST}/bin
      --build-dir ./build
      --jobs ${FLATPAK_BUILDER_N_JOBS}
      --debug
      --verbose
      --confirm-license
      --no-docstrings
      --no-qml-plugin
      --no-designer-plugin
      --no-tools
      --no-dbus-python
      --enable Qt
      --enable QtCore
      --enable QtGui
      --enable QtWidgets
      --disable=QtOpenGL
      --disable=_QOpenGLFunctions_2_0 --disable=_QOpenGLFunctions_2_1 --disable=_QOpenGLFunctions_4_1_Core
      #--enable=QtNetwork
      #--enable=QtWebChannel
      #--enable=QtPrintSupport
      #--enable=QtWebKit --enable=QtWebKitWidgets
      #--enable=QtSensors --enable=QtQuick --enable=QtQml --enable=QtTest
      #--enable=QtWebChannel --enable=QtQuickWidgets
      #--enable=QtSql --enable=QtXmlPatterns --enable=QtMultimedia --enable=QtMultimediaWidgets
      #--enable=QtLocation --enable=QtDesigner --enable=QtBluetooth
      #--enable=QtNfc --enable=QtPositioning
      #--enable=QtHelp --enable=QtPrintSupport --enable=QtXml
      #--enable=QtSerialPort --enable=QtWebSockets --enable=QtRemoteObjects --enable=QtTextToSpeech
      #--enable=_QOpenGLFunctions_2_0 --enable=_QOpenGLFunctions_2_1 --enable=_QOpenGLFunctions_4_1_Core
      #--enable=QtDBus --enable=QtSvg --enable=QtX11Extras
sources:
    - type: archive
      url: https://files.pythonhosted.org/packages/4d/5d/b8b6e26956ec113ad3f566e02abd12ac3a56b103fcc7e0735e27ee4a1df3/PyQt5-5.15.10.tar.gz
      sha256: d46b7804b1b10a4ff91753f8113e5b5580d2b4462f3226288e2d84497334898a

modules:
    - name: python3-PyQt-builder
      cleanup:
        - '*'
      buildsystem: simple
      build-commands:
        - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
          --prefix=${FLATPAK_DEST} "PyQt-builder<2,>=1.9" --no-build-isolation
      sources:
        - type: file
          url: https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
          sha256: 806143ae5bfb6a3c6e736a764057db0e6a0e05e338b5630894a5f779cabb4f9b
        - type: file
          url: https://files.pythonhosted.org/packages/80/c1/23fd82ad3121656b585351aba6c19761926bb0db2ebed9e4ff09a43a3fcc/pyparsing-3.0.7-py3-none-any.whl
          sha256: a6c06a88f252e6c322f65faf8f418b16213b51bdfaece0524c1c1bc30c63c484
        - type: file
          url: https://files.pythonhosted.org/packages/05/8e/8de486cbd03baba4deef4142bd643a3e7bbe954a784dc1bb17142572d127/packaging-21.3-py3-none-any.whl
          sha256: ef103e05f519cdc783ae24ea4e2e0f508a9c99b2d4969652eed6a2e1ea5bd522
        - type: file
          url: https://files.pythonhosted.org/packages/22/cb/3763a07a046884cdc14668758895cc6a8cd1b8d06281d5b6914b0e6948bc/sip-6.8.3-py3-none-any.whl
          sha256: 11c332566de0d752df92906101260e81401bf574417a6bc31fb99364ae6b652d
        - type: file
          url: https://files.pythonhosted.org/packages/01/e4/14ad7db5d3c4f32372951a9c58b589f286f228d6406eee74ca8a46a5ea00/PyQt_builder-1.16.0-py3-none-any.whl
          sha256: c60ddbd1e23b5896c752a89cc54fa9d0d78d8b2b620701524446f0bbef1385d1

    - name: python3-PyQt5-sip
      buildsystem: simple
      build-commands:
        - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
          --prefix=${FLATPAK_DEST} "PyQt5-sip" --no-build-isolation
      sources:
        - type: file
          url: https://files.pythonhosted.org/packages/ee/81/fce2a475aa56c1f49707d9306b930695b6ff078c2242c9f2fd72a3214e1f/PyQt5_sip-12.13.0.tar.gz
          sha256: 7f321daf84b9c9dbca61b80e1ef37bdaffc0e93312edae2cd7da25b953971d91
